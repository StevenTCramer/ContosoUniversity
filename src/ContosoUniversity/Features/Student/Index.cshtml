@model Index.Result
@using ContosoUniversity.Features.Student;
@using PagedList.Mvc;
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

@{
    ViewBag.Title = "Students";
}

<h2>Students</h2>

<p>
	  @(Html.ActionLink("Create New","Create","Student"))
    @*@(Html.Link<UiController>(c => c.Create(), "Create New"))*@
</p>
<form method="GET">
    <p>
        Find by name: @Html.Input(m => m.SearchString).RemoveClass("form-control")
        <input type="submit" value="Search" />
    </p>
</form>
    <table class="table">
        <tr>
            <th>
								@(Html.ActionLink("Last Name", "Index", new Index.Query { SortOrder = Model.NameSortParm, CurrentFilter = Model.CurrentFilter }))
            </th>
            <th>
                First Name
            </th>
            <th>
								@(Html.ActionLink("Enrollment Date", "Index", new Index.Query { SortOrder = Model.DateSortParm, CurrentFilter = Model.CurrentFilter }))
            </th>
            <th></th>
        </tr>


        @{ int i = 0; }
        @foreach (var item in Model.Results)
        {
            <tr>
                <td>
                    @Html.Display(modelItem => modelItem.Results[i].LastName)
                </td>
                <td>
                    @Html.Display(modelItem => modelItem.Results[i].FirstMidName)
                </td>
                <td>
                    @Html.Display(modelItem => modelItem.Results[i].EnrollmentDate)
                </td>
                <td>
									@(Html.ActionLink("Edit", "Edit", new Edit.Query { Id = item.ID }))
									@(Html.ActionLink("Details", "Details", new Details.Query { Id = item.ID }))
									@(Html.ActionLink("Delete", "Delete", new Delete.Query { Id = item.ID }))
                </td>
            </tr>
            i++;
        }

    </table>
    <br />
    Page @(Model.Results.PageCount < Model.Results.PageNumber ? 0 : Model.Results.PageNumber) of @Model.Results.PageCount

    @*@(Html.PagedListPager(Model.Results, page => Url.Action<UiController>(c => c.Index(new Index.Query { Page = page, SortOrder = Model.CurrentSort, CurrentFilter = Model.CurrentFilter }))))*@
